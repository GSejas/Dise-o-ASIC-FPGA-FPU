! Test program for debug mdct core
	
        .data
	
bitrev:	.word 504,0,248,256,376,128,120,384,440,64,184,320,312,192,56,448,472,32,216,288,344,160,88,416,408,96,152,352,280,224,24,480,488,16,232,272,360,144,104,400,424,80,168,336,296,208,40,464,456,48,200,304,328,176,72,432,392,112,136,368,264,240,8,496

trig:	.word  16384,0,16364,-804,16305,-1606,16207,-2404,16069,-3196,15893,-3981,15679,-4756,15426,-5520,15137,-6270,14811,-7005,14449,-7723,14053,-8423,13623,-9102,13160,-9760,12665,-10394,12140,-11003,11585,-11585,11003,-12140,10394,-12665,9760,-13160,9102,-13623,8423,-14053,7723,-14449,7005,-14811,6270,-15137,5520,-15426,4756,-15679,3981,-15893,3196,-16069,2404,-16207,1606,-16305,804,-16364,0,-16384,-803,-16364,-1605,-16305,-2403,-16207,-3195,-16069,-3980,-15893,-4755,-15679,-5519,-15426,-6269,-15137,-7004,-14811,-7722,-14449,-8422,-14053,-9101,-13623,-9759,-13160,-10393,-12665,-11002,-12140,-11584,-11585,-12139,-11003,-12664,-10394,-13159,-9760,-13622,-9102,-14052,-8423,-14448,-7723,-14810,-7005,-15136,-6270,-15425,-5520,-15678,-4756,-15892,-3981,-16068,-3196,-16206,-2404,-16304,-1606,-16363,-804,16382,100,16380,301,16375,502,16367,703,16358,904,16346,1104,16331,1305,16313,1505,16294,1706,16272,1906,16247,2105,16220,2304,16191,2503,16159,2701,16124,2899,16087,3097,16048,3294,16006,3491,15962,3687,15916,3883,15867,4078,15816,4272,15763,4466,15707,4659,15648,4851,15587,5043,15524,5234,15458,5424,15391,5614,15321,5802,15248,5990,15174,6176,15097,6362,15017,6546,14936,6730,14852,6913,14767,7095,14679,7275,14588,7455,14495,7633,14400,7811,14304,7987,14205,8162,14103,8336,14000,8508,13894,8679,13787,8849,13677,9017,13566,9185,13452,9351,13336,9515,13218,9678,13099,9840,12977,10000,12853,10158,12727,10315,12600,10471,12470,10625,12339,10777,12206,10927,12071,11076,11934,11223,11795,11369,11655,11513,8189,-201,8170,-602,8130,-1003,8071,-1400,7993,-1795,7895,-2185,7778,-2569,7643,-2948,7489,-3319,7317,-3683,7128,-4038,6921,-4382,6697,-4717,6458,-5040,6203,-5351,5933,-5648,5648,-5933,5351,-6203,5040,-6458,4717,-6697,4382,-6921,4038,-7128,3683,-7317,3319,-7489,2948,-7643,2569,-7778,2185,-7895,1795,-7993,1400,-8071,1003,-8130,602,-8170,201,-8189
	
arr:    .word	0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255
ini:	.word   7,6,5,1   
sum:	.word   7,6,5,4,3,2,1,0

        .text

start: 
        set     0x80000204, %r3     ! %r3 is  start address register
	set	ini, %r6	    ! %r6 is starting read address
	st	%r6,[%r3]	    ! trig start address is set

        set     0x80000208, %r3     ! %r3 is  stop address register
	set	sum, %r6	    ! %r6 is stop  address
	st	%r6,[%r3]	    ! arr stop address is set

        set     0x80000090, %r3     ! %r3 is  stop address register
	set	30720, %r6	    ! %r6 enables user interrupts
	st	%r6,[%r3]	    ! set user interrupts			
		
	set     arr, %r2            ! %r2 is the base address
	set	0x80000200,%r2	    ! %r2 has ddm control register
	set	1,%r5		    ! %r5 is the control value for ddm
				    ! interrumpt enabled, interruptrequest & ddm enabl
	st	%r5,[%r2]	    ! enables ddm
		
        set     0x80000304, %r3     ! %r3 is address of bitreverse
	set	bitrev, %r6         ! start bitrev
	st	%r6,[%r3]	    ! set bit rev in control register

        set     0x80000308, %r3     ! %r3 is trig start address register
	set	trig, %r6	    ! %r6 is trig starting read address
	st	%r6,[%r3]	    ! trig start address is set

		
        set     0x8000030c, %r3     ! %r3 is mdct read start address register
	set	arr, %r6	    ! %r6 is the starting read address
	st	%r6,[%r3]	    ! start read address is set
	
        set     0x80000310, %r3     ! %r3 is mdct write start address register
	set	sum, %r6	    ! %r6 is the starting write address
	st	%r6,[%r3]	    ! start write address is set	

        set     0x80000300, %r3     ! %r3 is mdct write start address register
	set	1, %r6		    ! %r6 holds the enable value of mdct
				    ! and size of 256 points	
	st	%r6,[%r3]	    ! go mdct
	
	set	0, %r6		    ! %r6 holds the stop value of mdct
	st	%r6,[%r3]	    ! stop mdct


		
	set	425,%r5		    ! %r5 repeats the following loop in order
				    ! in order to give more time to mdct
	

loop:   ld     [%r2+%r3], %r6       ! fetch the next element
        add    %r4, %r6, %r4        ! add it to the running sum
	subcc  %r5, 1, %r5          ! one fewer element
        bne    loop                 ! if %r5 > 0 get next element
        add    %r3, 4, %r3          ! increment the index (DELAY SLOT)



        sethi  %hi(sum), %r1        ! store the result in sum
        st     %r4, [%r1+%lo(sum)]
end:    ta      0



